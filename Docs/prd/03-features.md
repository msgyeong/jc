# PRD - 핵심 기능 정의

## 7. 핵심 기능 정의 (What, not How)

### 7.1 계정 및 인증

#### 회원 가입
- 앱을 통해 회원 가입 가능
- 회원 가입 시 입력 항목은 **기준 문서 단일화**를 위해 PRD에 상세 목록을 중복 기재하지 않음
  - 상세 필드 목록(필수/선택), 형식 규칙(하이픈 여부, 글자수 제한 등), 프로필 사진 업로드 규칙은
    기능 설계 문서(단일 기준)에서 관리한다.
- 회원 가입 시 '가입대기' 상태로 등록됨 (`is_approved = false`)
- 관리자 웹에서 가입 승인 처리 필요
  - 관리자 웹에서 회원 정보 리스트 관리
  - 관리자 웹에서 가입 신청 내용을 인준하여 승인
  - 승인 시 `is_approved = true`로 변경
- **회원 가입 완료 후 플로우**
  - "승인 요청" 버튼 클릭 → 회원가입 정보 저장
  - 다음 화면: "회원 가입이 승인 진행중입니다" + '확인' 버튼
  - 확인 버튼 클릭 → 로그인 화면으로 복귀
- 가입 승인된 회원만 로그인 및 서비스 이용 가능
- 가입 승인은 관리자 웹에서만 가능
- 관리자 웹은 특정 사용자를 '강제로 승인해제' 시킬 수 있음
  - 승인된 회원(`is_approved = true`)을 가입대기 상태(`is_approved = false`)로 변경 가능
  - 승인해제된 회원은 로그인 불가
- **관리자 웹 회원 상태 관리**
  - 가입 거절 (REJECTED): `is_approved = false`, `rejection_reason` 입력
  - 회원 정지 (SUSPENDED): `is_suspended = true` 설정
  - 회원 탈퇴 (WITHDRAWN): `withdrawn_at` 설정 또는 `is_deleted = true`

#### 로그인
- **스플래시 화면**
  - 앱 실행 시 `assets/images/jc_logo_slash.png` 이미지 표시
  - 서버에서 데이터를 가져오는 것을 완료했을 때까지 표시 (최대 3초)
  - 인증 상태 확인 후 로그인 화면 또는 홈 화면으로 전환
- **로그인 화면 구성**
  - 이메일 입력 필드
  - 비밀번호 입력 필드
  - 로그인 버튼
  - 하단 버튼: "비밀번호 찾기" (이메일 기반 비밀번호 재설정), "회원가입"
- 아이디 및 비밀번호 로그인
- 소셜 로그인 지원
  - 카카오 로그인
- 개인정보 보호 동의 필수
- 소셜 로그인 사용 시에도 추가 정보 입력 필요 (소속 JC, JC 직책 등)
- **가입 승인된 회원만 로그인 가능** (`is_approved = true`, `is_suspended = false`, `withdrawn_at IS NULL`)
- **로그인 에러 처리**
  - 미등록 이메일: "등록되지 않은 회원입니다" 메시지 표시
  - 비밀번호 불일치: "비밀번호가 일치하지 않습니다" 메시지 표시 (정중한 톤)
- **회원 상태별 로그인 처리**
  - 가입대기 상태 (`is_approved = false`, `rejection_reason IS NULL`): 승인 진행중 화면으로 리다이렉트
  - 거절 상태 (`is_approved = false`, `rejection_reason IS NOT NULL`): 로그인 차단, 거절 사유 안내
  - 정지 상태 (`is_suspended = true`): 로그인 차단, 정지 안내
  - 탈퇴 상태 (`withdrawn_at IS NOT NULL` 또는 `is_deleted = true`): 로그인 차단
- **승인 진행중 화면**
  - 로그인 시도 시에만 접근 가능 (일반 네비게이션 불가)
  - "회원 가입이 승인 진행중입니다" 메시지 표시
  - "확인" 버튼만 제공 (로그인 화면으로 복귀)
- **자동 로그인 유지 기능**
  - 한번 로그인하면 해당 기기에서 계속 로그인 상태 유지
  - 앱 삭제 또는 로그아웃 시에만 로그인 상태 해제
  - 핸드폰 변경 시에만 다시 로그인 필요
- **로그인하지 않은 사용자 접근 제어**
  - 로그인하지 않은 상태에서는 앱의 모든 기능에 접근 불가
  - 하단 탭 네비게이션 숨김
  - 모든 보호된 화면 접근 차단
  - 로그인 화면으로 자동 리다이렉트

---

### 7.2 회원 프로필 관리 (회원 기록 카드)
본 앱은 JC 회원 기록 카드의 역할을 병행하여 회원 정보를 체계적으로 관리합니다.

#### 입력 항목 정의 (중복 제거 / 단일 기준 문서)
- 회원 프로필(회원 기록 카드) 입력 항목의 상세 목록은 PRD에서 중복 관리하지 않음
- 상세 기준은 기능 설계 문서(단일 기준)에서 관리한다.
  - 파일명/경로는 본 저장소의 기능 설계 문서를 기준으로 한다.

#### 교육 이력 정책
- 회원 직접 입력 불가
- 관리자 웹에서 강제로 입력
- 교육 기수 기반 검색 가능

#### 관리자 전용 필드 / 수정 불가 항목 (단일 기준 문서)
- PRD의 중복을 방지하기 위해, 관리자 전용 필드 및 앱에서 수정 불가 항목 목록은 아래 문서에서 단일 관리함:
  - 기능 설계 문서(단일 기준)

#### 앱 사용자 프로필 수정 제한
- 관리자 웹에서 지정한 특정 항목은 앱 사용자가 수정할 수 없음
- 관리자가 입력한 사항은 프로필에서 자동 공개
- 관리자가 입력하지 않은 사항은 비공개
- **자동 공개 항목** (관리자 입력 시):
  - 소속 JC
  - JC 직책
  - 가입일
  - 연수
  - 표창
  - 국제대회 참가
  - JC경력

#### 회원 기록 카드 관리
- 관리자 웹에서 회원 기록 카드 형태로 관리
- 관리자 웹에서 회원 기록 카드 수정, 삭제, 추가 가능
- 회원 기록 카드는 회원 가입 시 입력한 정보를 기반으로 생성
- 관리자 전용 필드는 관리자 웹에서만 입력/수정 가능

#### 관리자 웹: 회원 관리 카드(운영용 상세 화면)
- 관리자 웹에서 회원을 검색/선택하면, 해당 회원의 "모든 회원 정보"를 한 화면에서 확인한다.
  - 회원가입 시 받은 정보 + 관리자 웹에서 보완/추가 입력한 정보를 취합하여 표시한다.
- 연수/교육 현황(예: 이수/미이수)을 기준으로 회원을 필터링/정렬하여 빠르게 확인한다.

---

### 7.3 게시판

#### 공지 게시판
- 관리자 웹에서 권한을 부여받은 특정 직책만 게시글 작성 가능
- 권한이 부여된 직책 예시: 회장, 상임부회장, 사무국장, 사무차장 등
- 관리자 웹에서 직책별 권한 설정 및 관리 가능

#### 일반 게시판
- 승인된 회원 누구나 게시글 작성 가능

#### 게시글 상세
- 이미지 최대 5개까지 업로드 가능 (각각 500MB 이하)
- 본문 최대 10MB
- 댓글 및 대댓글 가능 (대대댓글 불가)
- 공감 기능 제공

#### 공지사항 참석자 조사
- 공지사항 상세 조회 시 참석자 조사 UI 제공
- 참석 여부 선택 가능 (참석/불참/미정)
- 참석자 목록 및 통계 표시
- 공지사항 작성 시 참석자 조사 활성화 옵션 제공

---

### 7.4 일정 및 캘린더

- 게시글 작성 시 일정 등록 가능
- 일정은 캘린더에 자동 반영
- Push 알림 구조만 구현
- MVP 단계에서는 비활성
- v1.0 이후 활성화

---

### 7.5 알림 기능

- 공지 및 일정 알림 구조 존재
- MVP 단계에서는 Push 알림 비활성
- v1.0 이후 가입 승인 및 일정 리마인더 알림 활성화

---

### 7.6 회원 검색

- 검색 기준
  - 이름
  - 직업
  - 업종
  - JC 직책
  - 소속 JC
  - 지역
  - 교육 기수
- (운영 편의) 연수/교육 현황(이수/미이수) 기준으로 필터링/정렬을 제공한다.
- 50명 단위 로딩
- 더보기 방식

---

### 7.7 관리자 기능
#### 관리자 웹 (운영 콘솔)
- 최고 관리자 계정(`manager_###`)으로 관리자 웹에 접근 가능
  - 최고 관리자 계정 형식: `manager_###`
  - ###은 JCI 인준 번호
  - 예: 영등포 JC는 manager_008
- 앱과 동일한 Supabase 백엔드 사용
- 관리자 웹에서 모든 기능 및 회원 승인 등을 진행
- 관리자 기능을 웹에서 사용 가능
  - 회원 관리 (회원 승인, 정보 수정, 직책 및 소속 관리)
  - 교육 이력 입력
  - 직책별 권한 설정 및 관리
  - 게시판 관리
  - 일정 관리

- 깔끔한 디자인으로 구현
- 데스크톱 환경에 최적화

#### 앱 권한 정책 (직책 기반)
- 관리자 웹에서 승인한 특정 직책에게만 앱에서 권한 부여
- 권한이 부여된 직책 예시: 회장, 상임부회장, 사무국장, 사무차장 등
- 관리자 웹에서 직책별로 권한 부여/해제 가능 (확장 가능)
- 앱에서 사용 가능한 권한:
  - 공지사항 작성 권한
  - 일정 등록 권한
  - 게시글 삭제 권한
- 직책 변경 시 권한 자동 반영
  - 사용자의 직책이 변경되면 해당 직책의 권한이 자동으로 적용됨
  - 권한이 없는 직책으로 변경 시 권한 자동 해제

---

### 7.8 사업장 배너/프로모션
- 사업장을 운영하는 회원이 영등포 JC 회원을 대상으로 홍보할 수 있는 배너/프로모션 노출 수단을 제공한다.
- 배너 클릭 시 사업장 홈페이지(또는 예약/소개 페이지)로 연결될 수 있어야 한다.

---

## 주요 기능 목록 (v3.0)

| 기능 ID | 기능명 |
|---|---|
| F-001 | 홈 화면 요약 정보 제공 |
| F-002 | 게시글 목록 탐색 |
| F-003 | 게시글 상세 조회 |
| F-004 | 게시글 작성 |
| F-005 | 공지사항 조회 |
| F-006 | 공지사항 작성 |
| F-007 | 일정 목록/캘린더 조회 |
| F-008 | 일정 상세 조회 |
| F-009 | 일정 등록 |
| F-010 | 회원 목록/검색 |
| F-011 | 프로필 상세 조회 |
| F-012 | 관리자 회원 관리 |
| F-013 | 관리자 웹 |
| F-015 | 참석자 조사 기능 |
