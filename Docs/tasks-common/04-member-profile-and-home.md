# 4단계: 회원/프로필 및 홈 화면 기능 구현

**기간**: 6일차 ~ 7일차  
**목표**: 회원 목록/검색, 프로필 상세/수정, 홈 화면 요약 정보 제공 기능 완성

---

## 메인 화면·N배지 정책 (요구사항)

> 상세: **02-0-board-and-schedule-policy.md** 참고.

- **메인 화면 노출**: **일정이 첨부된 게시글**(또는 정책상 메인 노출 대상)을 **최대 3개**까지 노출. **기간이 지난** 것은 노출하지 않음.
- **N배지**: 새 게시물에 N 표시. **읽은 사용자**의 로그인 세션에서는 해당 글에 대해 **N이 사라짐**(개인별 읽음 처리).

---

## 웹 구현 완료 현황 (코드 분석 기준)

- [x] **웹** 회원 목록 (loadMembers, createMemberCard) — 아바타, 이름, 연락처/주소, 무한 스크롤 50명 단위, 빈 상태 — `web/js/members.js`, `api/routes/members.js`
- [x] **웹** 회원 검색 (searchMembers, 디바운싱 300ms) — `apiClient.searchMembers`
- [x] **웹** 내 프로필 표시 (loadProfile, renderProfile) — 헤더(아바타, 이름, 직책, 상태), 기본 정보, 가입 정보 — `web/js/profile.js`, `api/routes/profile.js`
- [ ] **웹** 프로필 수정 (현재 alert만)
- [x] **웹** 홈 화면 (loadHomeData) — 배너(샘플), 공지 요약 5개, 일정 요약 5개, N배지, 전체 보기 — `web/js/home.js`
- [x] **웹** 하단 탭 네비게이션 (5탭, switchTab, updateNavigation, 탭별 데이터 로드) — `web/js/navigation.js`

> **선행 조건**: 
> - [ ] 3단계 완료 (공지사항 및 일정 기능)

> **참고**: 
> - 관리자 전용 필드는 수정 불가 (읽기 전용)
> - 관리자가 입력한 필드는 자동 공개

> **역할 구분**: 
> - 🤖 **Cursor(AI)**: Cursor가 혼자 진행 가능한 작업
> - 👤 **사용자**: 사용자가 직접 해야 하는 작업 (테스트, 검증 등)

---

## 회원 모델 확장

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 회원 모델 확장
- [ ] `lib/models/member_model.dart` 확장
  - 관리자 전용 필드 추가 (읽기 전용)
  - 관련 정보 추가 (educations, careers, families, awards 등)
- [ ] 관련 모델 생성
  - education_model.dart, career_model.dart, family_model.dart
  - award_model.dart, international_competition_model.dart
  - jc_career_model.dart, education_history_model.dart
- [ ] build_runner 실행

---

## 회원 목록 및 검색 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 회원 목록 UI
- [ ] `lib/screens/members/member_list_screen.dart` 생성
- [ ] 검색 입력 필드 (상단 고정)
- [ ] 회원 리스트
- [ ] 회원 카드 위젯
  - 프로필 사진 (원형)
  - 이름
  - JC 직책 (있는 경우)
  - 특우회 배지 (isSpecialMember = true)
- [ ] 검색 결과 없음 상태
- [ ] 전체 회원 없음 상태

### [ ] 회원 검색 기능
- [ ] 실시간 검색 (디바운싱)
- [ ] 검색 기준 (PRD 기준)
  - 이름
  - 직업
  - 업종
  - JC 직책
  - 소속 JC
  - 지역
  - 교육 기수
- [ ] 50명 단위 로딩 (더보기 방식)
- [ ] 연수/교육 현황(이수/미이수) 기준 필터링/정렬 (선택)

### [ ] 회원 목록 Provider
- [ ] `lib/providers/member_list_provider.dart` 생성
- [ ] 회원 목록 조회
- [ ] 검색 기능

---

## 내 프로필 탭 화면

> **역할**: 🤖 **Cursor(AI)** 전담  
> **참고**: 1단계 테스트(로그인/로그아웃, 인증 가드)를 위해 선행 구현

### [x] 내 프로필 탭 기본 UI
- [x] 내 프로필 탭 전용 화면 (`lib/screens/profile_tab_screen.dart`)
- [x] AppBar 타이틀: "내 프로필"
- [x] AppBar 우측 상단 로그아웃 버튼
  - 탭 시 Supabase `signOut()` 호출 → 인증 상태 변경 → 로그인 화면 리다이렉트

---

## 프로필 상세 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 프로필 상세 UI
- [ ] `lib/screens/members/profile_detail_screen.dart` 생성
- [ ] 프로필 헤더
  - 프로필 사진 (큰 원형)
  - 이름, JC 직책, 특우회 배지
- [ ] 프로필 정보 섹션
  - 기본 정보 (이메일, 휴대폰, 주소, 직장 정보)
  - 학력 정보 (목록)
  - 경력 정보 (목록)
  - 가족 정보 (혼인 유무, 배우자, 자녀)
  - 기타 정보 (취미, 특기, 추천인)
- [ ] 관리자 전용 필드 섹션 (읽기 전용, 있는 경우만 표시)
  - 소속 JC, 회원번호, JC 직책, 가입일 등
  - 표창 목록, 국제대회 참가 목록, JC 경력 목록, 교육 이력 목록
- [ ] 수정 버튼 (내 프로필인 경우)

### [ ] 프로필 상세 Provider
- [ ] `lib/providers/profile_detail_provider.dart` 생성
- [ ] 프로필 정보 조회
- [ ] 관리자 전용 필드 조회 (별도 API 호출)

---

## 내 프로필 수정 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 프로필 수정 UI
- [ ] `lib/screens/members/profile_edit_screen.dart` 생성
- [ ] 프로필 사진 수정
  - 현재 프로필 사진 표시
  - 사진 변경 버튼
  - 이미지 선택/업로드
- [ ] 기본 정보 입력 필드 (회원가입과 유사)
- [ ] 학력 정보 (목록, 추가/수정/삭제)
- [ ] 경력 정보 (목록, 추가/수정/삭제)
- [ ] 가족 정보
- [ ] 기타 정보
- [ ] 관리자 전용 필드 섹션 (읽기 전용, 회색 처리, 수정 불가 메시지)

### [ ] 프로필 수정 기능
- [ ] 유효성 검증 (필수 필드, 학력/경력 최소 1개)
- [ ] 프로필 수정 Provider
  - 프로필 정보 수정
  - 관리자 전용 필드 수정 시도 시 에러 처리

---

## 홈 화면 구현

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 홈 화면 UI
- [ ] `lib/screens/home/home_screen.dart` 생성
- [ ] 배너 슬라이드 섹션
  - 가로 스크롤 가능
  - 페이지 인디케이터
  - 자동 스크롤 (선택)
- [ ] **일정 첨부 게시글 섹션 (메인 노출)** — 정책: 02-0-board-and-schedule-policy.md
  - 일정이 첨부된 게시글(또는 메인 노출 대상) **최대 3개**
  - **기간이 지난** 일정의 글은 노출하지 않음
  - N배지: 읽지 않은 글에만 N 표시 (개인별 읽음)
- [ ] 공지사항 요약 섹션
  - 섹션 헤더 ("공지사항", "전체 보기" 버튼)
  - 공지사항 요약 리스트 (최대 5개)
  - 공지 카드 (제목, 등록일, 'N' 배지)
  - 빈 상태 메시지
- [ ] 다가오는 일정 요약 섹션
  - 섹션 헤더 ("다가오는 일정", "전체 보기" 버튼)
  - 일정 요약 리스트 (최대 5개)
  - 일정 카드 (제목, 날짜, 시간, 'N' 배지)
  - 빈 상태 메시지
- [ ] Pull-to-refresh

### [ ] 홈 화면 Provider
- [ ] `lib/providers/home_provider.dart` 생성
- [ ] 배너 목록 조회
- [ ] 공지사항 요약 조회 (최신 5개 또는 고정 공지 포함)
- [ ] 일정 요약 조회 (오늘 이후 5개)
- [ ] 통합 로딩 상태 관리

---

## 배너 기능 구현

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 배너 모델 생성
- [ ] `lib/models/banner_model.dart` 생성 (Freezed)

### [ ] 배너 서비스
- [ ] `lib/services/banner_service.dart` 생성
- [ ] 배너 목록 조회 (활성화된 것만, displayOrder 기준)

### [ ] 배너 슬라이드 위젯
- [ ] `lib/widgets/banner_slider.dart` 생성
- [ ] PageView 사용
- [ ] 페이지 인디케이터
- [ ] 배너 탭 시 링크 이동 (있는 경우)

---

## 하단 탭 내비게이션 완성

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 하단 탭 내비게이션 완성
- [ ] `lib/widgets/main_navigation.dart` 완성 (기본 구조는 1단계에서 생성됨)
- [ ] 각 탭별 라우트 상세 구현
- [ ] 탭 전환 애니메이션
- [ ] 현재 탭 표시 (하이라이트)
- [ ] 인증 가드 통합 확인 (미인증 사용자는 하단 탭 숨김)

---

## 개발자 작업

> **역할**: 👤 **사용자** 전담

### [ ] 테스트 및 검증
- [ ] 회원 검색 성능 테스트 (100명 이상)
- [ ] 프로필 정보 표시 확인
  - 모든 필드 올바르게 표시
  - 관리자 전용 필드 읽기 전용 확인
- [ ] 프로필 수정 권한 테스트
  - 관리자 전용 필드 수정 시도 시 에러 메시지
  - 일반 필드 정상 수정 가능
- [ ] 프로필 사진 업데이트 테스트
- [ ] 홈 화면 성능 테스트
  - 초기 로딩 속도
  - Pull-to-refresh 동작
- [ ] 배너 이미지 최적화 확인
- [ ] 내비게이션 플로우 테스트

---

## 완료 기준

- [x] **(웹)** 회원 목록 표시 및 검색 정상 작동
- [x] **(웹)** 프로필 상세 화면 모든 정보 올바르게 표시 (기본 정보, 가입 정보)
- [ ] 내 프로필 수정 가능 및 관리자 전용 필드 수정 불가
- [x] **(웹)** 홈 화면 배너, 공지사항, 일정 요약 표시
- [x] **(웹)** 하단 탭 내비게이션 정상 작동
- [x] **(웹)** 미인증 사용자는 하단 탭 볼 수 없음 (인증 후 메인 진입)

---

## 다음 단계
이 단계 완료 후 **05-admin-web.md**로 진행
