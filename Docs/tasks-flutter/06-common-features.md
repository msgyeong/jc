# 6단계: 공통 기능 및 마무리

**기간**: 10일차  
**목표**: 공통 기능 완성 및 전체 기능 통합

> **선행 조건**: 
> - [ ] 5단계 완료 (관리자 웹)

> **역할 구분**: 
> - 🤖 **Cursor(AI)**: Cursor가 혼자 진행 가능한 작업
> - 👤 **사용자**: 사용자가 직접 해야 하는 작업 (테스트, 검증 등)

---

## 디자인 시스템 통합 및 확장

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 디자인 시스템 통합 (기본 설정은 1단계에서 완료)
- [ ] 모든 화면에 디자인 시스템 일관 적용 확인
- [ ] 컴포넌트 스타일 확장 적용 (design-system/03-component-styles.md)
  - AppBar: Primary Color 배경
  - 버튼: 48dp 높이, 8dp cornerRadius
  - 텍스트 필드: 48dp 높이, 8dp cornerRadius
  - 카드: 12dp cornerRadius, elevation 1~2
  - 리스트 아이템: 최소 56dp 높이
  - 탭 바: Primary Color 인디케이터
- [ ] 재사용 가능한 컴포넌트 생성
  - 공통 버튼 위젯
  - 공통 텍스트 필드 위젯
  - 공통 카드 위젯

---

## 공통 에러 처리

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 에러 처리 구현
- [ ] `lib/utils/error_handler.dart` 생성
  - 네트워크 에러 처리
  - Supabase 에러 처리
  - 사용자 친화적 에러 메시지 변환
- [ ] 에러 표시 위젯 (`lib/widgets/error_widget.dart`)
  - SelectableText.rich 사용 (Error Color `#DC2626`)
  - 재시도 버튼 포함
- [ ] 전역 에러 핸들러 (Riverpod ErrorListener)

---

## 로딩 상태 표시

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 로딩 위젯 구현
- [ ] `lib/widgets/loading_widget.dart` 생성
- [ ] 스켈레톤 UI (선택, `lib/widgets/skeleton_loader.dart`)
- [ ] AsyncValue 위젯 헬퍼 (`lib/widgets/async_value_builder.dart`)

---

## 빈 상태 컴포넌트

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 빈 상태 위젯 구현
- [ ] `lib/widgets/empty_state.dart` 생성
- [ ] 각 화면별 빈 상태 메시지
  - 게시글이 없을 때
  - 공지사항이 없을 때
  - 일정이 없을 때
  - 회원이 없을 때
  - 검색 결과가 없을 때

---

## 공통 다이얼로그 및 알림

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 다이얼로그 구현
- [ ] 확인 다이얼로그 (`lib/widgets/confirm_dialog.dart`)
- [ ] 알림/스낵바 (선택)
- [ ] 커스텀 다이얼로그 (이미지 선택, 날짜/시간 선택)

---

## 이미지 업로드 유틸리티 확장

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 이미지 업로드 유틸리티 확장 (기본 구조는 1단계에서 생성됨)
- [ ] 이미지 리사이징 기능 추가 (필요시)
- [ ] 다중 이미지 업로드 지원 확장
- [ ] 이미지 업로드 재사용 가능한 위젯 (`lib/widgets/image_upload_field.dart`)
- [ ] 이미지 업로드 에러 처리 개선
- [ ] 업로드 진행 상태 UI 개선

---

## 날짜/시간 포맷팅

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 날짜/시간 포맷팅 유틸리티
- [ ] `lib/utils/date_formatter.dart` 생성
  - 상대 시간 표시 ("2시간 전", "3일 전")
  - 날짜 포맷팅 ("2026-01-19")
  - 시간 포맷팅 ("14:30")
- [ ] intl 패키지 사용 (한국어 로케일 설정)

---

## 네트워크 오류 처리

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 네트워크 오류 처리
- [ ] 네트워크 연결 확인 (connectivity_plus 패키지, 선택)
- [ ] 네트워크 오류 시 재시도 로직 (자동/수동)

---

## 앱 아이콘 및 스플래시 스크린

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 앱 아이콘 및 스플래시 설정
- [ ] flutter_launcher_icons 패키지 설정
- [ ] flutter_native_splash 패키지 설정 (선택)

---

## 전체 기능 통합 검증

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 주요 플로우 테스트
- [ ] 회원가입 → 로그인 → 홈 화면
- [ ] 게시글 작성 → 목록 표시 → 상세 조회
- [ ] 공지사항 작성 → 목록 표시 → 참석자 조사
- [ ] 일정 등록 → 목록 표시 → 상세 조회
- [ ] 회원 검색 → 프로필 조회
- [ ] 프로필 수정

### [ ] 권한 테스트
- [ ] 일반 회원 권한
- [ ] 관리자 권한
- [ ] 권한 없는 기능 접근 차단

---

## 개발자 작업

> **역할**: 👤 **사용자** 전담

### [ ] 디자인 시스템 적용 확인
- [ ] 색상 팔레트 적용 여부 확인
- [ ] 타이포그래피 적용 여부 확인
- [ ] 컴포넌트 스타일 일관성 확인

### [ ] 에러 메시지 사용성 확인
- [ ] 사용자에게 명확하게 전달되는지 확인
- [ ] 기술적 용어 대신 일반적인 언어 사용 확인

### [ ] 로딩 상태 UX 확인
- [ ] 로딩 시간이 길 때 적절한 피드백 제공
- [ ] 스켈레톤 UI 사용 여부 결정

### [ ] 이미지 최적화 확인
- [ ] 이미지 크기 및 형식 최적화
- [ ] 캐싱 정책 확인

### [ ] 앱 아이콘 및 스플래시 스크린 디자인
- [ ] 앱 아이콘 제작 (1024x1024)
- [ ] 스플래시 스크린 이미지 제작
- [ ] 플랫폼별 설정 (Android/iOS)

### [ ] 전체 앱 플로우 수동 테스트
- [ ] 모든 주요 기능 정상 작동 확인
- [ ] 에러 없이 전체 플로우 완료 가능 확인

---

## 완료 기준

- [ ] 공통 에러 처리가 모든 화면에 적용됨
- [ ] 로딩 상태가 적절하게 표시됨
- [ ] 빈 상태가 모든 화면에 적용됨
- [ ] 이미지 업로드가 여러 화면에서 정상 작동함
- [ ] 날짜/시간이 일관되게 포맷팅됨
- [ ] 앱 아이콘 및 스플래시 스크린이 설정됨
- [ ] 전체 기능이 통합되어 정상 작동함

---

## 다음 단계
이 단계 완료 후 **07-testing-and-polish.md**로 진행
