# 5단계: 관리자 웹 개발

**기간**: 8일차 ~ 10일차  
**목표**: 관리자 웹 애플리케이션 구축 (회원 관리, 권한 관리, 콘텐츠 관리)

> **선행 조건**: 
> - [ ] 4단계 완료 (회원/프로필 및 홈 화면)

> **참고**: 
> - Next.js 14+ (App Router), TypeScript, Zustand, Tailwind CSS, shadcn/ui
> - Supabase Service Role 키 사용 (서버 사이드만)
> - `manager_###` 계정만 접근 가능

> **역할 구분**: 
> - 🤖 **Cursor(AI)**: Cursor가 혼자 진행 가능한 작업
> - 👤 **사용자**: 사용자가 직접 해야 하는 작업 (환경 설정, 테스트 등)

---

## 프로젝트 초기 설정

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] Next.js 프로젝트 구조 생성
- [ ] Next.js 프로젝트 생성 (App Router)
- [ ] 폴더 구조 생성 (app/, components/, lib/, types/)
- [ ] 의존성 설치
  - next, react, react-dom
  - @supabase/supabase-js, zustand
  - tailwindcss, @radix-ui/react-* (shadcn/ui)
  - date-fns

### [ ] Supabase 클라이언트 설정
- [ ] `lib/supabase/admin.ts` 생성 (Service Role 키, 서버 사이드만)
- [ ] `lib/supabase/client.ts` 생성 (Anon 키, 클라이언트 사이드)
- [ ] shadcn/ui 초기 설정

---

## 관리자 인증 시스템

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 관리자 로그인 화면
- [ ] `app/login/page.tsx` 생성
- [ ] 이메일/비밀번호 입력
- [ ] `manager_###` 계정 확인

### [ ] 인증 미들웨어
- [ ] `middleware.ts` 또는 서버 컴포넌트에서 인증 확인
- [ ] 미인증 시 로그인 화면으로 리다이렉트

### [ ] 세션 관리
- [ ] Zustand store 또는 서버 세션 사용
- [ ] 로그아웃 기능

---

## 대시보드 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 대시보드 UI
- [ ] `app/dashboard/page.tsx` 생성
- [ ] 통계 카드 (선택, MVP에서 제외 가능)
- [ ] 빠른 액션 링크
- [ ] 최근 활동 (선택)

### [ ] 네비게이션 메뉴
- [ ] 사이드바 또는 상단 메뉴
- [ ] 메뉴 항목 (대시보드, 회원 관리, 직책별 권한 관리, 게시판 관리, 공지사항 관리, 일정 관리, 배너 관리, 계정 설정)

---

## 회원 관리 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 회원 목록 화면
- [ ] `app/members/page.tsx` 생성
- [ ] 검색 입력 필드
- [ ] 필터 옵션 (가입 상태, 특우회 여부)
- [ ] 회원 목록 테이블
  - 체크박스, 이름, 이메일, JC 직책, 가입 상태, 가입일
  - 액션 버튼 (상세보기, 수정)
- [ ] 페이지네이션

### [ ] 회원 상세/수정 화면
- [ ] `app/members/[id]/page.tsx` 생성
- [ ] 탭 구성 (기본 정보, 관리자 전용 필드, 학력/경력, 가족 정보, 교육 이력)
- [ ] 기본 정보 탭 (일반 필드 수정 가능, 프로필 사진 업로드)
- [ ] 관리자 전용 필드 탭
  - 소속 JC, 회원번호, JC 직책, 가입일, 소속분과, 전입일
  - 표창 목록 (추가/수정/삭제, 최대 5개)
  - 국제대회 참가 목록 (추가/수정/삭제, 최대 2개)
  - JC 경력 목록 (추가/수정/삭제, 최대 5개)
  - 징계 이력 (추가/수정/삭제, 비공개)
- [ ] 교육 이력 탭
  - 교육 이력 목록 (추가/수정/삭제)
  - 교육 종류 선택 (신입회원교육, 2차교육, 리더십교육, 기타)
  - 교육 기수 입력 (교육 기수 기반 검색 지원)
  - 이수 여부 선택 (이수/미이수)
  - 수료일 입력
  - **회원 직접 입력 불가, 관리자 웹에서만 입력 가능**

### [ ] 회원 관리 기능
- [ ] 회원 목록 조회/검색/필터링
- [ ] 가입 승인/거절 (거절 사유 기록)
- [ ] 회원 상태 변경
  - 가입 거절 (REJECTED): `is_approved = false`, `rejection_reason` 입력
  - 회원 정지 (SUSPENDED): `is_suspended = true` 설정
  - 회원 복구 (정지 해제)
  - 회원 탈퇴 (WITHDRAWN): `withdrawn_at` 설정 또는 `is_deleted = true`
- [ ] 강제 승인해제 (승인된 회원을 가입대기 상태로 변경)
- [ ] 회원 정보 수정
- [ ] 관리자 전용 필드 입력

---

## 직책별 권한 관리 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 직책별 권한 관리 UI
- [ ] `app/permissions/page.tsx` 생성
- [ ] 직책 목록 (role_permissions 테이블 기반)
- [ ] 각 직책별 권한 설정
  - 공지사항 작성 권한 (can_post_notice)
  - 일정 등록 권한 (can_create_schedule)
  - 게시글 삭제 권한 (can_delete_post)
- [ ] 권한 부여/해제 토글
- [ ] 저장 버튼

### [ ] 권한 관리 기능
- [ ] 직책 목록 조회
- [ ] 권한 업데이트

---

## 게시판 관리 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 게시판 관리 UI
- [ ] `app/posts/page.tsx` 생성
- [ ] 게시글 목록 테이블
  - 제목, 작성자, 작성일, 댓글 수, 공감 수
  - 액션 버튼 (상세보기, 삭제)
- [ ] 검색/필터링
- [ ] 페이지네이션

### [ ] 게시판 관리 기능
- [ ] 게시글 목록 조회
- [ ] 게시글 삭제 (soft delete)
- [ ] 댓글 삭제 (관리자 웹에서 댓글 관리)

---

## 공지사항 관리 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 공지사항 관리 UI
- [ ] `app/notices/page.tsx` 생성
- [ ] 공지사항 목록
- [ ] 공지사항 작성 버튼
- [ ] 공지사항 상세/수정 화면
- [ ] 고정 공지 설정
- [ ] 참석자 조사 활성화 설정
- [ ] 삭제 기능

---

## 일정 관리 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 일정 관리 UI
- [ ] `app/schedules/page.tsx` 생성
- [ ] 일정 목록 (목록 또는 캘린더 뷰)
- [ ] 일정 작성 버튼
- [ ] 일정 상세/수정 화면
- [ ] 삭제 기능

---

## 배너 관리 화면

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 배너 관리 UI
- [ ] `app/banners/page.tsx` 생성
- [ ] 배너 목록 테이블
  - 이미지 미리보기, 제목, 링크 URL, 활성화 여부, 표시 순서
  - 액션 버튼 (추가, 수정, 삭제)
- [ ] 배너 추가/수정 화면
  - 제목 입력
  - 이미지 업로드 (Supabase Storage)
  - 설명 입력
  - 링크 URL 입력 (선택)
  - 표시 순서 입력
  - 활성화 여부 설정
- [ ] 표시 순서 변경 (드래그 앤 드롭 또는 숫자 입력)

### [ ] 배너 관리 기능
- [ ] 배너 목록 조회
- [ ] 배너 추가/수정/삭제
- [ ] 배너 이미지 업로드 (Supabase Storage)
- [ ] 표시 순서 업데이트

---

## 관리자 계정 비밀번호 변경

> **역할**: 🤖 **Cursor(AI)** 전담

### [ ] 비밀번호 변경 UI
- [ ] `app/settings/password/page.tsx` 생성
- [ ] 현재 비밀번호 입력
- [ ] 새 비밀번호 입력
- [ ] 새 비밀번호 확인
- [ ] 변경 버튼

### [ ] 비밀번호 변경 기능
- [ ] Supabase Auth API 사용
- [ ] 유효성 검증

---

## 개발자 작업

> **역할**: 👤 **사용자** 전담

### [ ] 환경 설정
- [ ] Next.js 프로젝트 생성 및 초기 설정 검토
- [ ] 환경 변수 설정 (.env.local)
  - NEXT_PUBLIC_SUPABASE_URL
  - NEXT_PUBLIC_SUPABASE_ANON_KEY
  - SUPABASE_SERVICE_ROLE_KEY (서버 사이드만)

### [ ] 관리자 계정 설정
- [ ] Supabase Auth에서 `manager_###` 형식 계정 생성
- [ ] 초기 비밀번호 설정

### [ ] 테스트 및 검증
- [ ] 관리자 로그인 테스트
- [ ] 가입 승인/거절 플로우 테스트
- [ ] 회원 정보 수정 테스트 (관리자 전용 필드 포함)
- [ ] 교육 이력 입력 테스트
- [ ] 권한 변경 즉시 반영 테스트 (앱에서 확인)
- [ ] 게시판/공지사항/일정 관리 테스트
- [ ] 배너 관리 테스트 (추가/수정/삭제, 이미지 업로드, 표시 순서 변경)
- [ ] 비밀번호 변경 테스트

---

## 완료 기준

- [ ] 관리자 로그인 정상 작동
- [ ] 회원 관리에서 가입 승인/거절 가능
- [ ] 회원 정보 수정 가능 및 관리자 전용 필드 입력 가능
- [ ] 직책별 권한 관리 가능 및 앱에 즉시 반영
- [ ] 게시판/공지사항/일정 관리 가능
- [ ] 배너 관리 가능 (추가/수정/삭제, 이미지 업로드, 표시 순서 변경)
- [ ] 배너 이미지 업로드 및 표시 순서 변경 정상 작동
- [ ] 관리자 계정 비밀번호 변경 가능

---

## 다음 단계
이 단계 완료 후 **06-common-features.md**로 진행
