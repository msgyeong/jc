# 플로우 간 연동 지점 매핑

생성일: 2026-01-19

본 문서는 **앱과 관리자 웹 간 플로우 연동 지점**을 매핑하여, 플랫폼 간 데이터 동기화 및 사용자 경험의 일관성을 보장한다.

---

## 관리자 웹 → 앱 연동

### 회원 관리 관련

| 관리자 웹 플로우 | 앱 플로우 | 연동 내용 | 동기화 방식 |
|---|---|---|---|
| UF-AW-002 (가입 승인) | UF-001 (앱 진입) | 가입 승인 후 로그인 가능 | 즉시 반영 |
| UF-AW-003 (회원 정보 수정) | UF-007 (프로필 조회) | 프로필 정보 변경 반영 | 즉시 반영 |
| UF-AW-003 (권한 부여) | UF-004 (공지 작성) | 공지 작성 권한 반영 | 즉시 반영 |
| UF-AW-003 (권한 부여) | UF-006 (일정 등록) | 일정 등록 권한 반영 | 즉시 반영 |

### 콘텐츠 관리 관련

| 관리자 웹 플로우 | 앱 플로우 | 연동 내용 | 동기화 방식 |
|---|---|---|---|
| UF-AW-005 (공지 작성) | UF-002 (콘텐츠 탐색) | 공지 목록/홈에 표시 | 즉시 반영 |
| UF-AW-005 (공지 수정) | UF-002 (콘텐츠 탐색) | 공지 상세 내용 변경 | 즉시 반영 |
| UF-AW-005 (공지 삭제) | UF-002 (콘텐츠 탐색) | 공지 목록에서 제거 | 즉시 반영 |
| UF-AW-006 (일정 등록) | UF-005 (일정 확인) | 일정 목록/홈에 표시 | 즉시 반영 |
| UF-AW-006 (일정 수정) | UF-005 (일정 확인) | 일정 상세 내용 변경 | 즉시 반영 |
| UF-AW-006 (일정 삭제) | UF-005 (일정 확인) | 일정 목록에서 제거 | 즉시 반영 |
| UF-AW-004 (게시글/댓글 삭제) | UF-002 (콘텐츠 탐색) | 게시글/댓글 비노출 | 즉시 반영 |

---

## 앱 → 앱 연동

### 콘텐츠 생성 관련

| 앱 플로우 (작성) | 앱 플로우 (확인) | 연동 내용 | 동기화 방식 |
|---|---|---|---|
| UF-003 (게시글 작성) | UF-002 (콘텐츠 탐색) | 게시글 목록에 즉시 표시 | 즉시 반영 |
| UF-004 (공지 작성) | UF-002 (콘텐츠 탐색) | 공지 목록/홈에 즉시 표시 | 즉시 반영 |
| UF-006 (일정 등록) | UF-005 (일정 확인) | 일정 목록/홈에 즉시 표시 | 즉시 반영 |

### 상호작용 관련

| 앱 플로우 (작성) | 앱 플로우 (확인) | 연동 내용 | 동기화 방식 |
|---|---|---|---|
| 댓글 작성 | UF-002 (콘텐츠 탐색) | 상세 화면에 댓글 표시 | 즉시 반영 |
| 공감 | UF-002 (콘텐츠 탐색) | 상세 화면에 공감 수 증가 | 즉시 반영 |
| 읽음 처리 | UF-002 (콘텐츠 탐색) | 'N' 배지 제거 | 즉시 반영 |

---

## 플랫폼 간 공통 플로우

### 인증 관련

| 시스템 플로우 | 적용 플랫폼 | 연동 내용 |
|---|---|---|
| UF-SYS-001 (로그인/로그아웃) | 앱 | Supabase Auth 사용 |
| UF-SYS-002 (로그인/로그아웃) | 관리자 웹 | 최고 관리자 인증 |
| UF-SYS-003 (회원 가입) | 앱 | 가입 신청 → 관리자 웹 승인 필요 |

### 에러 처리 관련

| 시스템 플로우 | 적용 플랫폼 | 연동 내용 |
|---|---|---|
| UF-SYS-004 (에러 처리) | 앱, 관리자 웹 | 공통 에러 처리 패턴 |

### 데이터 동기화 관련

| 시스템 플로우 | 적용 플랫폼 | 연동 내용 |
|---|---|---|
| UF-SYS-006 (데이터 동기화) | 앱, 관리자 웹 | Supabase 실시간 기능 활용 |

---

## 연동 지점별 데이터 흐름

### 1. 회원 가입 → 승인 → 로그인

```
앱 (UF-SYS-003 회원 가입)
  ↓ is_approved = false
Supabase DB
  ↓
관리자 웹 (UF-AW-002 가입 승인)
  ↓ is_approved = true
Supabase DB
  ↓
앱 (UF-001 앱 진입) - 로그인 가능
```

### 2. 관리자 웹 공지 작성 → 앱 확인

```
관리자 웹 (UF-AW-005 공지 작성)
  ↓ INSERT INTO notices
Supabase DB
  ↓ (실시간 동기화)
앱 (UF-002 콘텐츠 탐색) - 홈/공지 목록에 표시
```

### 3. 앱 게시글 작성 → 앱 목록 표시

```
앱 (UF-003 게시글 작성)
  ↓ INSERT INTO posts
Supabase DB
  ↓ (실시간 동기화)
앱 (UF-002 콘텐츠 탐색) - 게시글 목록에 표시
```

### 4. 회원 정보 수정 → 프로필 반영

```
관리자 웹 (UF-AW-003 회원 정보 수정)
  ↓ UPDATE members
Supabase DB
  ↓ (실시간 동기화)
앱 (UF-007 프로필 조회) - 프로필 정보 변경 반영
```

---

## 동기화 정책

### 즉시 반영 원칙
- 관리자 웹에서 변경된 권한/회원 상태는 앱에 **즉시 반영**되어야 한다
- 앱에서 생성된 콘텐츠(게시글, 댓글, 공감 등)는 **즉시 반영**되어야 한다

### 실시간 동기화
- Supabase 실시간 기능 활용 (가능한 경우)
- 또는 화면 진입 시 최신 데이터 조회

### 데이터 정합성
- 플랫폼 간 데이터 불일치 방지
- 트랜잭션 처리로 데이터 일관성 보장

---

## 참고 문서

- 앱 플로우: `01-app-flows.md`
- 관리자 웹 플로우: `02-admin-web-flows.md`
- 시스템/공통 플로우: `03-system-flows.md`
- 기능 상세 설계: `../prd/08-design.md`
- 기술 스택: `../prd/06-tech-stack.md`
